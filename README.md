# かごノート
#### 買い物リストを作成するアプリ。
まずはよく作る料理やいつも買うもの、よく利用するお店を登録。
登録した料理や買うものからお店ごとの買い物リストを作成出来ます。

## URL
https://shoppinglistapp.mydns.jp/

## 制作背景
生活環境の変化から食材の調達は週に一度まとめ買いをするようになりました。<br>
以前は使用していなかったネットスーパーも利用することで便利さを感じる反面、買い物に関して不便に感じることがいくつか出てきました。<br>

- ネットスーパーで欲しいものが必ずしも全て手に入るわけではない
- お店ごとに品揃えの特色があり、「お肉は〇〇スーパーで買いたい」などのこだわりが出てきた
- まとめ買いのために１週間の料理を全て考え、いくつもの本やレシピサイトを開いて必要なものをリストアップするのが大変
- いつも買う食材をわかりやすいところにメモしておいても、買い物時には忘れることがある

これらの不便さを解消する買い物リストを作るアプリを作りたいと思うようになりました。<br>
アプリ作成に関し、以下の希望を叶えられるよう設計しました。<br>

- お店ごとの買い物リストを作りたい
- 買い物リストを作成するときに、よく作る料理に必要な食材が自動的に出てくるようにしたい
- いつも買うものを登録しておき、買い物リスト作成時にそれらが出てくるようにして買い忘れを防ぎたい
- いつも買うわけではないが今度買おうと思っている調味料などをメモしておき、買い物リストに取り入れられるようにしたい

## 使用技術
- Java　17
- SpringBoot 3.1.4
- HTML(Thymeleaf),CSS
  - Bootstrap 5.3.2
- JavaScript
  - jQuery 3.7.1
- PostgreSQL
- AWS
  - Cloud9
  - EC2  

## 機能一覧
- ユーザー登録機能
- ログイン機能
- ログアウト機能
- 作成した買い物リストの表示・買い物リストの削除機能
- 買い物リストの作成機能
- 料理の登録・編集・削除機能
- お店の登録・削除機能
- 「いつも買うもの」の登録・削除機能
- 「あとで買うもの」の登録・削除機能
- レスポンシブ対応

## 工夫した点
- 料理の登録画面
  - 材料や調味料の入力欄を追加出来るようにしたところ（最大２０行）。すっきりとした画面設計を実現。　
  - ユーザーに材料種類を選択してもらうことで、買い物リスト作成時の材料表示時に同じ種類の材料がまとめて出力されるようにしたところ。
- 買い物リスト作成画面
  - 作成したタイミングで、買い物リストが作成画面の下部に表示されるようにしたところ。買い物リストを同時に複数作成するときに、先に作った買い物リストの内容を見直せるようになっています。

## 苦労した点
- 料理の登録機能
  - 料理の登録時、料理・材料・調味料のそれぞれのエンティティに同時にデータを登録しなければならず、紐付け作業に苦戦しました。
  - 材料や調味料の欄を追加出来るようにするための画面表示にJavaScriptを使用したが、そもそもJavaScriptの知識がなく、どうしたらやりたいことを実現できるか考えるのが大変でした。
  - 画面上では材料の入力欄が材料ごとに独立したように見えていても、データが配列で飛んでしまっていました。入力順通りにデータが一つずつ飛ぶよう番号をふる必要があり、そのロジックを考えることに苦労しました（結果的にJavaScriptで実現）。
- DB設計
  - 買い物リスト作成時、それまでにDB登録してある「材料」や「いつも買うもの」等をどのように買い物リストエンティティと繋ぐか、ということを考えるのが難しかったです。結果的にテーブル数が多くなってしまいましたが、shopping_list_ingredientなどの買い物リスト用のテーブルを用意することで、それまでに登録した「材料」などのDBの内容を書き換えることなく、買い物リストに紐付けするようなデータ構造にすることが出来ました。

## DB設計

![Image from Gyazo](https://i.gyazo.com/f8d2729b6ca73564dd8528f95a57ff51.png)

| テーブル名 | 説明 |
| ---- | ---- |
| users | 登録ユーザーの情報 |
| dish | ユーザーが登録した料理 |
| ingredient | ユーザーが登録した材料 |
| seasoning | ユーザーが登録した調味料 |
| always_buy | ユーザーが登録した「いつも買うもの」 |
| later_buy | ユーザーが登録した「あとで買うもの」 |
| shop | ユーザーが登録したお店の情報 |
| shopping_list | 作成された買い物リスト |
| shopping_list_ingredient | 買い物リストに掲載される材料 |
| shopping_list_seasoning | 買い物リストに掲載される調味料 |
| shopping_list_always_buy | 買い物リストに掲載される「いつも買うもの」 |
| shopping_list_later_buy | 買い物リストに掲載される「あとで買うもの」 |

## 今後追加したい機能など

- 外部のAPI（楽天レシピ）を利用したレシピの検索画面の作成。料理のネタ切れのときなどに検索できるようにしたい。
- 現在の仕様では各ページに何も登録していないときには何も表示されないので、「登録された〇〇はありません」などとユーザーにわかりやすく表示したい
- 機能ではないが、ソースコードの見直し（Serviceなどで長くなってしまっているコードをすっきりさせたい）
- エラー画面の作成
